# 0. 简介
1. 四位作者合称 GOF（四人帮，全拼 Gang of Four），他们所提出的设计模式主要是基于以下的面向对象设计原则。
* 对接口编程而不是对实现编程。
* 优先使用**对象组合**而不是继承。

2. 设计模式的类型
* 创建型模式（Creational Patterns);
* 结构型模式（Structural Patterns);
* 行为型模式（Behavioral Patterns);

![设计模式的类型](https://wx3.sinaimg.cn/large/006H1aMCly1g053r967uuj30l50pejto.jpg)

3. 设计模式的六大原则
* 开闭原则（Open Close Principle）
开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，**实现一个热插拔的效果**。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。

* 里氏代换原则（Liskov Substitution Principle）
里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，**任何基类可以出现的地方，子类一定可以出现**。LSP是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。

* 依赖倒转原则（Dependence Inversion Principle）
这个原则是开闭原则的基础，具体内容：**针对接口编程，依赖于抽象而不依赖于具体**。

* 接口隔离原则（Interface Segregation Principle）
这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：**降低类之间的耦合度**。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。

* 迪米特法则，又称最少知道原则（Demeter Principle）
最少知道原则是指：**一个实体应当尽量少地与其他实体之间发生相互作用**，使得系统功能模块相对独立。

* 合成复用原则（Composite Reuse Principle）
合成复用原则是指：**尽量使用合成/聚合的方式，而不是使用继承**。

# 1. 工厂模式（Factory Pattern）
在工厂模式中，我们**在创建对象时不会对客户端暴露创建逻辑**，并且是通过使用一个共同的接口来指向新创建的对象。主要有三种（简单工厂，工厂，抽象工厂）
## 介绍
意图：定义一个创建对象的接口，**让其子类自己决定实例化哪一个工厂类，工厂模式使其创建过程延迟到子类进行**。
主要解决：主要解决接口选择的问题。
何时使用：我们明确地计划不同条件下创建不同实例时。
如何解决：让其子类实现工厂接口，返回的也是一个抽象的产品。
关键代码：创建过程在其子类执行。

![image](https://ws1.sinaimg.cn/large/006H1aMCly1g054s8o8d2j30fk091taa.jpg)

# 2. 抽象工厂模式
## 介绍
意图：提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。
主要解决：主要解决接口选择的问题。
何时使用：**系统的产品有多于一个的产品族，而系统只消费其中某一族的产品(比如跨平台)**。
如何解决：在一个产品族里面，定义多个产品。
关键代码：在一个工厂里聚合多个同类产品。
应用实例：工作了，为了参加一些聚会，肯定有两套或多套衣服吧，比如说有商务装（成套，一系列具体产品）、时尚装（成套，一系列具体产品），甚至对于一个家庭来说，可能有商务女装、商务男装、时尚女装、时尚男装，这些也都是成套的，即一系列具体产品。假设一种情况（现实中是不存在的，要不然，没法进入共产主义了，但有利于说明抽象工厂模式），在您的家中，某一个衣柜（具体工厂）只能存放某一种这样的衣服（成套，一系列具体产品），每次拿这种成套的衣服时也自然要从这个衣柜中取出了。用 OO 的思想去理解，所有的衣柜（具体工厂）都是衣柜类的（抽象工厂）某一个，而每一件成套的衣服又包括具体的上衣（某一具体产品），裤子（某一具体产品），这些具体的上衣其实也都是上衣（抽象产品），具体的裤子也都是裤子（另一个抽象产品）。
优点：当一个产品族中的多个对象被设计成一起工作时，它能保证客户端始终只使用同一个产品族中的对象。
缺点：产品族扩展非常困难，要增加一个系列的某一产品，既要在抽象的 Creator 里加代码，又要在具体的里面加代码。
使用场景： 1、QQ 换皮肤，一整套一起换。 2、**生成不同操作系统的程序**。
注意事项：**产品族难扩展**，产品等级易扩展。
![image](https://wx4.sinaimg.cn/large/006H1aMCly1g055z7qz8vj30fk0c574y.jpg)

![image](https://ws3.sinaimg.cn/large/006H1aMCly1g056fg9uogj30lh0e3gpg.jpg)
产品ProductA_1和ProductB_1构成一族产品，对应于有Factory1来创建，也就是说Factory1总是创建的ProductA_1和ProductB_1的产品，在客户端看来只需要知道是哪一类工厂和产品组就可以了。一般来说， ProductA_1和ProductB_1都是适应同一种环境的，所以他们会被归为一族。






